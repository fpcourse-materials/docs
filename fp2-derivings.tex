%! suppress = MissingLabel

Ранее мы говорили о том, что всё, что пишут программисты, --- интерпретаторы.
Оказывается, многие из них можно получать автоматически, выйдя на новый уровень обобщения.
А код, который может не быть написан, --- не должен быть написан.

Как правило, такая ситуация возникает, когда интерпретация полностью определяется описанием (формой) типа.
То есть тем, какие конструкторы данных для него определены, с какими полями, как они называются\ldots
Такими интерпретациями являются, например, сериализация в конеретный формат (e.g. json), структурное равенство и т.д.

Решением является поддержка в языке \vocab{структурного полиморфизма} \vocab{(structural polymorphism)}~\cite[глава 13]{maguire-types} или \vocab{datatype-generic программирование}, как это иногда называют.

% todo не хотим писать код, который можно не писать

Можно вообразить язык, в котором data-generic программирование является обычным программированием~\cite{chapman2010gentle}.
Для этого берётся язык с зависимыми типами, с выделенной вселенной описаний \mintinline{haskell}|Desc|.
Конкретные типы же получаются применением функции интерпретации \mintinline{haskell}|Desc -> Type|.
Таким образом, параметрический полиморфизм воплощается обобщением по типу, а структурный полиморфизм --- обобщением по его описанию.

% todo generics and Gibbons paper about abstractions

% todo Derivable type classes paper

TODO % todo

\subsection{Специализация}

\[
    \sembr{\sembr{spec}(p, x)}(y) \equiv \sembr{p}(x, y)
\]

% todo специализация в Haskell

% todo staged programming

% todo incremental computations

% todo Zig

% todo Oleg's finally tagless partially evaluated paper

% todo modal types for staged programming

% todo haskell SPECIALIZE

TODO\cite{liu2023incremental} % todo

\subsection{Ad-hoc решения}

% todo Kotlinx serialization

TODO % todo

\subsection{Подходы к datatype-generic в Haskell}

TODO % todo https://ora.ox.ac.uk/objects/uuid:cd041aa0-8d69-4f18-bce2-6d75244b69b9/files/m7fd9779b27fcb70ae734e66bcd3ee79f

\subsubsection{Template Haskel}

% todo Рефлексия и реификация

% todo порядок на коде для поддержания реификации

% todo hygene macro & dynamic scoping

% todo Staging with Class

TODO\footnote{\url{https://markkarpov.com/tutorial/th.html}} % todo

\subsubsection{Deriving strategies}

% todo deriving via & Kotlin delegates
% todo newtype derivings & coersions & kotlin delegates

% todo https://ryanglscott.github.io/2018/06/22/quantifiedconstraints-and-the-trouble-with-traversable/

% todo typed template haskell

TODO\footnote{\url{https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/deriving_strategies.html}} % todo

\subsubsection{GHC.Generics}

TODO\footnote{\url{https://ghc.gitlab.haskell.org/ghc/doc/users_guide/exts/generics.html}} % todo

\subsubsection{Sum Of Products}

TODO % todo SOP & variadics

\subsubsection{Uniplate}

% todo SYB

TODO % todo

% todo datatype-generic для интерпретаторов зазеркалья

% todo специализация и tagless final
